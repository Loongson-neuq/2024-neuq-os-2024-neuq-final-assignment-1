## 9. [并发编程][主观题] 使用低级模型实现简单的读写锁

要求学生用尽可能底层的模型（如 `volatile` 变量、原子变量等）实现一个简单的读写锁。该锁需要允许多个读线程并发访问，但当有写线程进入时，阻止所有读写操作。

**要求：**
- 仅使用低级的同步原语，如 `volatile` 变量、原子操作（如 `__sync` 或 `atomic` 函数）。
- 简单实现即可，不要求处理读者饥饿或写者优先等高级特性。
  
**功能需求：**
- `lock_read`: 获取读锁，允许多个线程同时获取读锁，但写操作存在时应阻塞读操作。
- `lock_write`: 获取写锁，需确保写锁独占资源。
- `unlock_read`: 释放读锁。
- `unlock_write`: 释放写锁。

你不需要考虑饥饿或优先级问题，只需实现基本的读写锁功能即可。
